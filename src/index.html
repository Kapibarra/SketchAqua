<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <div class="page">
        <div class="fade">
            <img src="img/splash2.png">
            <div class="top">
                <div class="logo"></div>
                <div class="menu"></div>
            </div>
            <div class="mask"></div>
            <div class="mainheader__navigation">
                <div class="mainheader__navigation-link"><a href="index.html" rel="noopener" class="activelink">Главная</a></div>
                <div class="mainheader__navigation-link"><a href="about.html" rel="noopener">Об авторе</a></div>
                <div class="mainheader__navigation-link"><a href="gallery.html" rel="noopener">Галерея</a></div>
                <div class="mainheader__navigation-link"><a href="contacts.html" rel="noopener">Контакты</a></div>
            </div>
        </div>
        <div class="mainpagesection__title">
            <p class="mainpagesection__title-text a1">
                Картины акварелью, скетчи и открытки от художницы Светланы Рахимовой.
            </p>
        </div>
        <footer class="pagefooter a1">
            <div class="mainpage__footer-copyright">
                <p>&#169 Novikov.N.M 2020 - <span id="year"></span></p>
            </div>
            <div class="mainpage__footer-icons">
                <a href="#">
                    <div class="mainpage__footer-icons-item"><img src="../img/footerlogotg.png"></div>
                </a>
                <a href="#">
                    <div class="mainpage__footer-icons-item"><img src="../img/footerlogoinst.png"></div>
                </a>
                <a href="#">
                    <div class="mainpage__footer-icons-item"><img src="../img/footerlogowa.png"></div>
                </a>
            </div>
        </footer>
    </div>
    <script src="src/js/three.js"></script>
    <script src="src/js/Aquarelle.js"></script>
    <script src="src/js/EffectComposer.js"></script>
    <script src="src/js/ClearPass.js"></script>
    <script src="src/js/AquarellePass.js"></script>
    <script src="src/js/ShaderPass.js"></script>
    <script src="src/js/CopyShader.js"></script>

    <script>
        var fade = document.querySelector('.fade');
        var topNav = document.querySelector('.top');
        var title = document.querySelector('.mask');
        var icons = Array.prototype.slice.call(document.querySelectorAll('.mainheader__navigation-link'));

        var image = document.getElementsByTagName('img')[0];
        var aquarelle = new Aquarelle(image, 'img/mask.png', {
            autoplay: true,
            loop: false,
            duration: 8000,
        });

        aquarelle.addEventListener('created', function() {
            var canvas = this.getCanvas();
            canvas.removeAttribute('style');
            image.parentNode.insertBefore(canvas, image.nextSibling);
            image.parentNode.removeChild(image);
        });

        aquarelle.addEventListener('changed', function(event) {
            fade.style.opacity = this.transitionInRange(1, 1, 7183, 7933);

            topNav.style.opacity = this.transitionInRange(0, 1, 4330, 5660);

            var canvas = this.getCanvas();
            canvas.style.webkitFilter = 'blur(' + this.transitionInRange(0, 24, 3000) + 'px)';
            canvas.style.webkitTransform = canvas.style.transform = 'translate(-50%, -50%) scale(' + this.transitionInRange(.5, 1) + ')';

            title.style.opacity = this.transitionInRange(0, 1, 0, 2016);
            title.style.webkitTransform = title.style.transform = 'scale(' + this.transitionInRange(.8, 1, 0, 5883) + ')';

            icons.forEach(function(icon) {
                icon.style.webkitFilter = 'blur(' + event.target.transitionInRange(4, 0, 3433, 4149) + 'px)';
                icon.style.opacity = event.target.transitionInRange(0, 1, 3433, 4266);
                icon.style.webkitTransform = icon.style.transform = 'scale(' + event.target.transitionInRange(1.3, 1, 3433, 4400) + ')';
            });
        });
    </script>
</body>

</html>